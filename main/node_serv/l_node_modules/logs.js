let path = require("path");
let fs = require("fs");
let $cn=require("./libNative").$cn
let cl=$cn.l
let tof=$cn.tof

class logmainO{
    constructor(params){
        if (tof(params)==="string"){
            this.init(params)
        }

    }

    init=(pathp)=>{
        this.path=pathp  
        if (fs.existsSync(path.dirname(pathp))===false){            
            fs.mkdirSync(path.dirname(pathp))                        
        }
    }

    add=(dt,cbp)=>{
        let cb=()=>{}
        if (tof(cbp)==="function"){cb=cbp}

        let wdt=`${new Date()};  ${dt};;\n`
        
        fs.appendFileSync(this.path ,wdt ,()=>{ // better to use sync because it doesnt keep file open and too many open handles could lead to corruption
            cb()
        })

    }
    path=""

}


module.exports.logs=logmainO